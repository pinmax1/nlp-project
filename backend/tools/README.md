# backend часть проекта

# 
всё, что модель сама по себе не умеет делать(а нам нужно), и мы можем выделить в отдельный вызов функции/поход в интернет/гадание на кофейной гуще - тулза
именно тулзы превращают нашего агента в RAG
интерфейс вызова тулзов будет примерно следующий: мы в промпте модели объясняем, что она умеет вызывать некоторые тулзы, даём их описание(я предалагю вот такой формат, спиздил его угадайте откуда):
tools = [
    {
        "type": "function",
        "function": {
            "name": "start_dota_game",
            "description": "Starts another search for a game of dota. Call it if you fucking hate your life and have important stuff to do, but have to play dota instead. MAY NOT work properly if you have low priority. Returns you a string with an amount of MMR lost or gain if format '+25', '-40', and an amount of idiots in your team(always 5). OUTPUT_EXAMPLE: {'mmr': '+30', 'idiots': '1'}, {'mmr': -13, 'idiots': null}",
            "parameters": {
                "type": "object",
                "properties": {
                    "hero": {
                        "type": "string",
                        "description": "A recognizible name of the character that user wants to play on. The hero with the least Levenstein distance to this parameter will be picked. If he was banned, the next least distance hero will be picked and so on. This parameter should be deduced from user's query. Example: 'pudge', 'pidge', 'sniper', 'venom'"
                    },
                    "position": {
                        "type": "string",
                        "description": "A number 1 to 5 which represents on which role user wants to play. 1 - carry, 2 - midlane, 3 - hardlane, 4 - soft support, 5 - hard support. This parameter should be deduced from user's query. ONLY VIABLE OPTIONS: '1', '2', '3', '4', '5'"
                    }
                },
                "required": [
                    "hero",
                    "position"
                ]
            }
        }
    },
]


# Что требуется
1) нужно продумать архитектуру того, как LLM'ке будет удобно взаимодействовать с тулзами
Это значит, что где-то в коде должна появиться возможность
а) по ответу LLM'ки понять, что она вызвала тул - start_dota_game
б) достать параметры этого тула
в) вызвать код, который сможет ответить на этот тул(скорее всего просто питон функция с +- такими же параметрами)
ЗДЕСЬ ПРОШУ не использовать AI-ассистов для построения архитектуры, А НАПИСАТЬ её САМОМУ. Когда архитектуру сам написал - можешь оставить комениты в коде, что нужно делать, и спокойно отдавать ассистентам.

2) Написать непосредственно код, который будет реализовывать тулзы, а также (!очень важно) чтобы твоя логика вызова тулзов по ответу ллм'ки была рабочей

3) скинуть остальной команде, чтобы мы могли тестить и использовать

# Как разрабатывать
1) модуль с использованием тулзов:
 - придумай себе пару тулзов(или сгенерь), кода для которых не будет, и которые будут возвращать всегда одно и тоже. Формат тулзов можешь взять как я предложил выше
 - если нет LLM'ки для использования, то попроси gpt'шку сгенерировать тебе текст, содержащий вызов тулзов в том формате, в котором ты хочешь их вызывать, и тести каждый раз на одинаковых запросах и ответах llm'ки, это норм
 - научи LLM'ку их вызывать
 - Проверь, что LLM'ка получает ответ из кода, а не галлюцинирует его самостоятельно(100% столкнёшься, тут надо аккуратно)
2) модуль, в котором содержится код тулзов
 - теперь непосредественно напиши описание нужных тулзов в формате выше
 - реализуй тулзы, чтобы они ходили в стим за описаниями и тд
 - проверь, что llm'ка может ходить в тулзы, и может получать ответ
3) потести на реальной LLM'ке - это когда Пинмакс подключит LLM'ку, то начнём твои тулзы тестить

# 
Обязательно если нужна помощь по логике или чему-то ещё, то консультируйся со мной или с командой, у тебя самая большая часть по труду, надо её качественно сделать